$(document).ready(function(){var e={modal:$("#editOrAddModal"),listContainer:$(".js_table_list"),pagerObj:"",inputName:$("#js_modal_name"),inputLocation:$("#js_modal_location"),inputCount:$("#js_modal_count"),inputExperience:$("#js_modal_experience"),inputDegree:$("#js_modal_degree"),inputProperty:$("#js_modal_property"),inputSalary:$("#js_modal_salary"),inputDescription:$("#js_modal_description"),inputRequirement:$("#js_modal_requirement"),setModalFormData:function(t){var n=e.modal.find(".modal-title");n.html(n.data("edit")),e.inputName.val(t.title),e.inputLocation.val(t.location),e.inputCount.val(t.num),e.inputExperience.val(t.experience),e.inputDegree.val(t.degree),e.inputProperty.val(t.nature),e.inputSalary.val(t.salary),e.inputDescription.val(t.duty),e.inputRequirement.val(t.requirement)},clearModalFormData:function(){var t=e.modal.find(".modal-title");t.html(t.data("new")),e.inputName.val(""),e.inputLocation.val(""),e.inputCount.val(""),e.inputExperience.val(""),e.inputDegree.val(""),e.inputProperty.val(""),e.inputSalary.val(""),e.inputDescription.val(""),e.inputRequirement.val("")},initPager:function(){e.pagerObj=$("#wrapperPageList").Pager({protocol:"/manage/get-recruit-list-ajax",listSize:20,onPageInitialized:function(){if(e.pagerObj){var t=$(window).scrollTop();t>100&&$(window).scrollTop(0)}},wrapUpdateData:function(e,t){var n={};return n&&$.extend(t,n),t}}),e.pagerObj.updateList(0)},initBtnEvent:function(){$(document).on("click",".js_edit",function(){e.clearModalFormData();var t=e.modal.find(".js_submit"),n=$(this),r=n.parents("tr"),i=r.data("id"),s=r.data("info");i&&s&&e.setModalFormData(s),e.modal.modal(),t.unbind().bind("click",function(){var t={id:i,title:$.trim(e.inputName.val()),location:$.trim(e.inputLocation.val()),num:$.trim(e.inputCount.val()),experience:$.trim(e.inputExperience.val()),degree:$.trim(e.inputDegree.val()),nature:$.trim(e.inputProperty.val()),salary:$.trim(e.inputSalary.val()),duty:$.trim(e.inputDescription.val()),requirement:$.trim(e.inputRequirement.val())},n={title:"职位名称",location:"工作地点",num:"招聘人数",experience:"工作经验",degree:"学历要求",nature:"工作性质",salary:"薪资范围",duty:"岗位职责"};for(var s in n)if(!t[s])return $.showToast("请输入"+n[s],!1),!1;$.wpost("/manage/update-recruit-ajax",t,function(n){t.id?r.replaceWith(n):e.listContainer.prepend(n),$.showToast("保存成功",!0),e.modal.modal("hide")})})}),$(document).on("click",".js_delete",function(){var t=$(this),n=t.parents("tr"),r=n.attr("data-id");$.confirm({content:"确认删除吗",success:function(){$.wpost("/manage/delete-recruit-ajax",{id:r,type:e.type},function(){$.showToast("删除成功",!0),t.parents("tr").remove()})}})}),$(document).on("click",".js_up,.js_down",function(){var e=$(this),t=$(e.parents(".js_modal_param")[0]);t.length==0&&(t=$(e.parents("tr")));var n;e.hasClass("js_up")?n=t.prev()[0]:n=t.next()[0];if(!n)return!1;e.hasClass("js_up")?$(n).before(t):$(n).after(t)}),$(document).on("click",".js_sort_save",function(){var e=$(".js_table_list tr"),t=[];for(var n=0;n<e.length;n++){var r=$(e[n]),i=r.data("id");if(i){var s={id:i,sort_num:n+1};t.push(s)}}if(t.length<1)return $.showToast("无可排序的数据",!1),!1;$.wpost("/manage/save-recruit-sort-ajax",{params:t},function(){$.showToast("保存成功",!0)})})},run:function(){e.initPager(),e.initBtnEvent()}};e.run()});